<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Makamesco SPANK MD ‚Äì Panel Deployment</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;margin:0;padding:2rem;text-align:center;background:#f7f7f7}
    h1{margin-top:0}
    input,button{padding:.6rem 1rem;font-size:1rem;border:1px solid #ddd;border-radius:6px}
    button{cursor:pointer;background:#111;color:#fff;margin:0.5rem}
    button.secondary{background:#333}
    .hidden{display:none}
    .card{background:#fff;margin:1.5rem auto;padding:1.5rem;max-width:480px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.08)}
  </style>
</head>
<body>

  <h1>üîê Fork Verification</h1>
  <p>Enter your GitHub username to confirm you‚Äôve forked <code>Makamesco_md</code>.</p>

  <input type="text" id="username" placeholder="GitHub username"/>
  <br/>
  <button onclick="verifyFork()">Verify</button>

  <p id="status"></p>
  <div id="fork-button" class="hidden">
    <button onclick="forkRepo()">üìÇ Fork Repository</button>
  </div>

  <!-- Deployment choices (hidden until verified) -->
  <div id="choices" class="hidden">

    <!-- FREE PANELS ---------------------------------------------------------->
    <div class="card">
      <h2>üöÄ Free Panels</h2>
      <p><em>Requires session ID in <code>sessions folder upload the Acquiredcreds.json</code></em></p>

      <button onclick="openSessionSite('https://spank-cred.onrender.com')">Get Session ID</button>
      <br/><br/>
      <button onclick="downloadZip('https://github.com/sesco001/Spank-md/archive/refs/heads/main.zip')">
        Download&nbsp;Makamesco-md-v&nbsp;ZIP
      </button>
      <br/><br/>
      <button onclick="openPanel('https://dashboard.katabump.com/auth/login#5e58ec')">
        Open Katapumb Panel
      </button>
    </div>

    <!-- PRIVATE PANELS ------------------------------------------------------->
    <div class="card">
      <h2>üîí Private Panels</h2>
      <p><em>Creds.json uploaded in sessions folder ‚Äì pair during console login</em></p>

      <button onclick="downloadZip('https://github.com/sesco001/Spank-md/archive/refs/heads/main.zip')">
        Download&nbsp;SPANK-MD&nbsp;ZIP
      </button>
    </div>

  </div>

  <script>
    async function verifyFork() {
      const user = document.getElementById("username").value.trim();
      const status = document.getElementById("status");
      const choices = document.getElementById("choices");
      const forkButton = document.getElementById("fork-button");

      if (!user) { 
        status.textContent = "‚ùó Enter a username."; 
        forkButton.classList.add("hidden");
        return; 
      }

      status.textContent = "üîç Checking forks‚Ä¶";
      choices.classList.add("hidden");
      forkButton.classList.add("hidden");

      try {
        const res = await fetch("https://api.github.com/repos/mesh-matheka/Makamesco_md/forks");
        const forks = await res.json();

        const forked = forks.some(f => f.owner.login.toLowerCase() === user.toLowerCase());

        if (forked) {
          status.textContent = "‚úÖ Fork verified.";
          choices.classList.remove("hidden");
          forkButton.classList.add("hidden");
        } else {
          status.textContent = "‚ùå Fork not found.";
          forkButton.classList.remove("hidden");
        }
      } catch (e) {
        console.error(e);
        status.textContent = "‚ö†Ô∏è Error contacting GitHub. Try again later.";
        forkButton.classList.add("hidden");
      }
    }

    function forkRepo() {
      window.open("https://github.com/mesh-matheka/Makamesco_md/fork", "_blank");
    }

    function openSessionSite(url) {
      window.open(url, "_blank");
    }

    function downloadZip(zipUrl) {
      window.open(zipUrl, "_blank");
    }

    function openPanel(panelUrl) {
      window.open(panelUrl, "_blank");
    }
  </script>

</body>
</html>
